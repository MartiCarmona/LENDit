<% if current_user != @user %>
<div class="profile-section">
  <div class="profile-header">
    <div class="profile-picture">
      <%= image_tag("joseluis.svg.png", class: "profile-image") %>
    </div>
    <div class="profile-details">
      <div class="profile-name-email">
        <h2 class="profile-name"><%= "#{@user.first_name} #{@user.last_name}" %></h2>
        <p class="profile-email"><%= @user.email %></p>
      </div>
    </div>
  </div>

  <div class="tab-buttons">
    <button id="btn-products" class="tab-btn active">Products</button>
    <button id="btn-rents" class="tab-btn">Bookings</button>
  </div>

  <div id="products" class="tab-content active">
    <div class="products-grid">
      <% @products.each do |product| %>
        <%= link_to product_path(product), class: 'product-link' do %>
          <div class="product-card">
            <%= image_tag(product.image, class: 'product-image') if product.image.attached? %>
            <div class="product-info">
              <span class="price">€<%= product.price_per_day.to_i == product.price_per_day ? product.price_per_day.to_i : product.price_per_day %></span>
              <p class="title"><%= product.title %></p>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>

  <div id="rents" class="tab-content">
    <div class="products-grid">
      <% @booked_products.each do |product| %>
        <%= link_to product_path(product), class: 'product-link' do %>
          <div class="product-card">
            <%= image_tag(product.image, class: 'product-image') if product.image.attached? %>
            <div class="product-info">
              <span class="price">€<%= product.price_per_day.to_i == product.price_per_day ? product.price_per_day.to_i : product.price_per_day %></span>
              <p class="title"><%= product.title %></p>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
<% else %>
  <%= render 'profile' %>
<% end %>

<%# <script>
  document.addEventListener('DOMContentLoaded', function() {
    const btnProducts = document.getElementById('btn-products');
    const btnRents = document.getElementById('btn-rents');
    const productsContent = document.getElementById('products');
    const rentsContent = document.getElementById('rents');

    btnProducts.addEventListener('click', function() {
      productsContent.classList.add('active');
      rentsContent.classList.remove('active');
      btnProducts.classList.add('active');
      btnRents.classList.remove('active');
    });

    btnRents.addEventListener('click', function() {
      rentsContent.classList.add('active');
      productsContent.classList.remove('active');
      btnRents.classList.add('active');
      btnProducts.classList.remove('active');
    });
  });
</script> %>
